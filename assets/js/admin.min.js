function reInitWidget(){jQuery(".tm-categories-tiles-form-widget select, .tm-categories-tiles-form-widget input[type=text]").off("change"),jQuery(".tm-categories-tiles-form-widget div.upload-image img").off("click"),jQuery(".tm-categories-tiles-form-widget .upload-image .delete-image-url").off("click"),jQuery(".tm-categories-tiles-form-widget .category-area .delete-category").off("click"),jQuery(".tm-categories-tiles-form-widget .categories .add-category").off("click"),initWidget()}function initWidget(){jQuery(".tm-categories-tiles-form-widget select, .tm-categories-tiles-form-widget input[type=text]").change(function(){jQuery(document).trigger("widget-change")}),jQuery(".tm-categories-tiles-form-widget div.upload-image img").click(function(e){var t=jQuery(this),i=t.parents(".category-area").find(".custom-image-url"),r=t.parents(".category-area").find(".upload-image img"),a=wp.media({title:"Upload a Image",button:{text:"Select"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().attributes.url;i.val(e).trigger("change"),r.attr("src",e)}),a.open(),e.preventDefault()}),jQuery(".tm-categories-tiles-form-widget .upload-image .delete-image-url").click(function(){var e=jQuery(this),t=e.parents(".category-area").find(".custom-image-url"),i=e.parents(".category-area").find(".upload-image img"),r=i.attr("default_image");return i.attr("src",r),t.val("").trigger("change"),!1}),jQuery(".tm-categories-tiles-form-widget .category-area .delete-category").click(function(e){var t=jQuery(this),i=t.parents(".category-area");return i.remove(),e.preventDefault(),!1}),jQuery(".tm-categories-tiles-form-widget .categories .add-category").click(function(e){var t=jQuery(this),i=t.parents(".tm-categories-tiles-form-widget").find(".categories"),r=parseInt(i.attr("count"))+1,a=t.parents(".tm-categories-tiles-form-widget").find(".category-area").last(),g=a.clone();return a.after(g),i.attr("count",r),g.find("h3 span").html(r),reInitWidget(),jQuery(document).trigger("widget-change"),e.preventDefault(),!1})}jQuery(document).on("widget-updated widget-added ready",initWidget);